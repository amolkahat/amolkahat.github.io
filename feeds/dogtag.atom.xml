<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Amol Kahat - Dogtag</title><link href="/" rel="alternate"></link><link href="/feeds/dogtag.atom.xml" rel="self"></link><id>/</id><updated>2016-07-01T18:00:00+05:30</updated><subtitle>Blog</subtitle><entry><title>Dogtag - Installation (Interactive)</title><link href="/dogtag-installation.html" rel="alternate"></link><published>2016-07-01T18:00:00+05:30</published><updated>2016-07-01T18:00:00+05:30</updated><author><name>amolkahat</name></author><id>tag:None,2016-07-01:/dogtag-installation.html</id><summary type="html">&lt;p&gt;In previous blog i explained about &lt;strong&gt;Dogtag certificate system&lt;/strong&gt; as an overview. Now lets install it your system. Dogtag certificate system is fully featured system which support multiple options of certificate enrollment and smart card enrollment. This certificate system require large no of dependency.&lt;/p&gt;
&lt;p&gt;Now we look how to install …&lt;/p&gt;</summary><content type="html">&lt;p&gt;In previous blog i explained about &lt;strong&gt;Dogtag certificate system&lt;/strong&gt; as an overview. Now lets install it your system. Dogtag certificate system is fully featured system which support multiple options of certificate enrollment and smart card enrollment. This certificate system require large no of dependency.&lt;/p&gt;
&lt;p&gt;Now we look how to install it and how to build it.&lt;/p&gt;
&lt;p&gt;For fedora 23 or later versions :&lt;/p&gt;
&lt;p&gt;&lt;code style="display:inline-block;background-color:lightgray;width:100%;"&gt;$ sudo dnf install 389-ds-base dogtag-pki&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;389-ds-base:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;389-ds-base is directory server which is used by directory server as a back end for Dogtag Certificate System. The certificate system is uses to store certificate request and certificate in the database.&lt;/li&gt;
&lt;li&gt;This is also known as Light Weight Directory Access Protocol (LDAP).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;dogtag-pki:&lt;/strong&gt;&lt;ul&gt;
&lt;li&gt;dogtag-pki is certificate system rpm files which installs the certificate system environment and dependency.&lt;/li&gt;
&lt;li&gt;This is include stable downstream version of dogtag-pki.&lt;/li&gt;
&lt;li&gt;This project maintained by Red Hat.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Subsystem Installation:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CA is Certificate Authority which is top of the system. The CA can be installed by two ways&lt;ul&gt;
&lt;li&gt;Using Interactive Installation&lt;/li&gt;
&lt;li&gt;Using Config File Installation.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Using Interactive installation:&lt;ul&gt;
&lt;li&gt;Using pkispawn you can install CA and other subsystem. Using pkispawn you can install config file installation too.&lt;/li&gt;
&lt;li&gt;pkispawn command will ask for some parameters.&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Subsystem:&lt;/strong&gt; Specify subsystem which you want to install like CA, KRA, OCSP, TKS, TPS.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Now specify Tomcat Parameters:&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Instance Name:&lt;/strong&gt; Specify Instance name of the subsystem.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Instance Secure and Unsecure port:&lt;/strong&gt; Every subsystem will ask for two ports. One port is secure port and another is unsecure port. The secure port is used for administrator and unsecure port will be used by the users.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;AJP and Management port: &lt;/strong&gt;AJP and Management ports are used by tomcat instance.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Administrator Section will prompt for this:&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Instance User Name: &lt;/strong&gt;Instance user name is require when we login to console for edit subsystem profile.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Instance Password and Confirm Password: &lt;/strong&gt;Instance password which is used to login console to edit subsystem profiles.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Certificate Import:&lt;/strong&gt; This option is ask for the certificate to import certificate of CA. If we installing standalone CA then we did not require this option, but for another subsystem this option is optional.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Export Certificate: &lt;/strong&gt;It will store subsystem certificate either in &lt;strong&gt;Client Directory&lt;/strong&gt; (If specified) or in &lt;strong&gt;/root/.dogtag/Instance/&lt;/strong&gt; directory.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Specify Directory server information:&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Hostname: &lt;/strong&gt;Your machine name. By default it is localhost.localdomain. You can change it to server.example.org.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDAPS Connection: &lt;/strong&gt;This option will ask for TLS enabled LDAP connection. If you choose secure connection then you have to specify CA certificate which used to crate TLS enabled LDAP.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LDAP and LDAPS port: &lt;/strong&gt;This option will ask for LDAP port. If you choose LDAPS connection then you have to specify LDAPS port too.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Password: &lt;/strong&gt;Password of Directory Server. It was specified at the installation time.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Base DN: &lt;/strong&gt;This is the directory server branch in which data of certificates is stored.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Security Domain:&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Name of Security Domain: &lt;/strong&gt;Security Domain name is a name of your website. For Ex: example.org Security Domain, google.com Security Domain, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Now Begin installation.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;After successful installation it will show Admin details like Name, pkcs12 file, certificate database. Instance management commands, subsystem URL.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To install CA, KRA, OCSP, TKS, TPS all the procedure is same. If you are installing on same tomcat then it will not prompt for tomcat section.&lt;/p&gt;
&lt;p&gt;There is little difference in the installation of TPS subsystem. In TPS you have to specify KRA, and TKS url with base dn i.e. dc=example,dc=org.&lt;/p&gt;</content><category term="Dogtag"></category></entry><entry><title>Dogtag</title><link href="/dogtag.html" rel="alternate"></link><published>2016-06-28T14:22:00+05:30</published><updated>2016-06-28T14:22:00+05:30</updated><author><name>amolkahat</name></author><id>tag:None,2016-06-28:/dogtag.html</id><summary type="html">&lt;p&gt;&lt;strong&gt;Dogtag certificate system&lt;/strong&gt; is an open source &lt;strong&gt;Certificate Authority (CA)&lt;/strong&gt;. Which is full featured system. It support all aspects of certificate life cycle management. It include Certificate Authority, Key archival, OCSP and smart card management.&lt;/p&gt;
&lt;p&gt;Dogtag Certificate System has 5 main components:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Certificate Authority (CA)&lt;/li&gt;
&lt;li&gt;Key Revocation Authority (KRA)&lt;/li&gt;
&lt;li&gt;Online …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;Dogtag certificate system&lt;/strong&gt; is an open source &lt;strong&gt;Certificate Authority (CA)&lt;/strong&gt;. Which is full featured system. It support all aspects of certificate life cycle management. It include Certificate Authority, Key archival, OCSP and smart card management.&lt;/p&gt;
&lt;p&gt;Dogtag Certificate System has 5 main components:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Certificate Authority (CA)&lt;/li&gt;
&lt;li&gt;Key Revocation Authority (KRA)&lt;/li&gt;
&lt;li&gt;Online Certificate Status Protocol (OCSP)&lt;/li&gt;
&lt;li&gt;Token Key Service (TKS)&lt;/li&gt;
&lt;li&gt;Token Processing Service (TPS)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Certificate Authority :&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CA is one who has rights to issue certificates, revoke and renew it. CA is on the top of the certificate system.  CA has the two main components&lt;!--more--&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;End User Services&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Agent Services&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;End User Services:&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;End User Services include different certificate profiles, which is used to enroll different types of certificates. Users can enroll their certificates using this profiles. Users get these certificate signed by CA.&lt;/p&gt;
&lt;p&gt;Certificate Enrollment process creates one certificate request and submit it to the CA. After the approval of certificate request by CA Agents user get signed certificate by CA. This will generate certificate chain to identify the flow of CA to user.&lt;/p&gt;
&lt;p&gt;[caption id="attachment_509" align="alignnone" width="797"]&lt;img alt="Flow of CA" class="alignnone size-full wp-image-509" height="447" src="https://akahat.files.wordpress.com/2016/06/ca-1.png" width="797"&gt; Flow of CA[/caption]&lt;/p&gt;
&lt;p&gt;Suppose CA is standalone and it issues certificate to user 1 then it generate certificate chain as CA and user. But if CA has sub CA then it generate certificate chain as CA, sub CA and user1.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Agent Services:&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Agent Services are support services such as approval, revocation, renewal of certificates. Agents Services include list and approval of request, list of approved certificates, revoke certificate, display certificate revocation list, manage certificate profiles, etc.&lt;/p&gt;
&lt;p&gt;When user submits the request using End User Services or from End Entity page these request are approved by Agents. Agent Services can be accessed by only and only admin certificate.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Recovery Authority:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Key Recovery Authority is an optional subsystem that is configured to archive private keys. KRA subsystem is by default installed after CA subsystem is installed and is dependent on CA for certain operations but can be installed as standalone subsystem too.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Online Certification Status Protocol:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Online Certificate Status Manager is an subsystem external to CA. This subsystem acts as an external OCSP which can be publicly accessible. Multiple CA's can publish CRL to a single OCSP. Clients can verify certs using OCSP.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Token Key Service:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The token key services manges to the master and transport keys required to generate and distribute keys for smart cards or tokens. A master key is a Triple Digital Encryption Standard (DES) symmetric key stored either in software or hardware token.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Token Processing System:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;TPS interacts with smart card to help them generate and store keys and certificate for a specific entity.&lt;/p&gt;
&lt;p&gt;Smart card operations go through TPS and are forwarded to the appropriate subsystem for action, such as the Certificate Authority to generate certificate or the Key Recovery Authority to archive and recover key.&lt;/p&gt;
&lt;p&gt;TPS has some best features that :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It uses secure channel to interact with smart cards, based on the keys derived by TKS.&lt;/li&gt;
&lt;li&gt;TPS uses developer keys sets to initially setup Secure channel.&lt;/li&gt;
&lt;li&gt;In the case smart card wants to upgrade keys. A new set of keys created by TKS are used to setup Secure Channel.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This Dogtag Certificate system is owned by Red Hat at 2004 by AOL. Red Hat open sourced it in 2008.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;There is also an Enterprise level version of Dogtag known as the Red Hat Certificate System.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Dogtag has very complex installation and lots of dependency .  I'm working on this project since last 5 months and i have some patches in this project. This is my first open source contribution.&lt;/p&gt;
&lt;p&gt;I have also fixed some bugs in the project. Those bugs were CLI bugs. But this project is very complex as per my opinion. &lt;!--more--&gt;&lt;/p&gt;</content><category term="Dogtag"></category></entry></feed>